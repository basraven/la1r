#/bin/bash

# This is the long-form command which summerized in the two one-liners below
touch /tmp/forcestart_last.txt ; \
curl -L   -H "Accept: application/vnd.github+json"   -H "X-GitHub-Api-Version: 2022-11-28"   https://api.github.com/gists/c15ceea3944b19448506650346b25dff > /tmp/forcestart_request.json && \
[[ $(cat /tmp/forcestart_request.json | jq '.files.forcecontrol.content | fromjson | .["linux-wayne"]') == "true" ]] && \
[[ $(cat /tmp/forcestart_request.json | jq '.updated_at') != $(cat /tmp/forcestart_last.txt) ]] && \
cat /tmp/forcestart_request.json | jq '.updated_at' > /tmp/forcestart_last.txt && \
sudo /usr/bin/python3 /home/basraven/start1.py > /var/log/cronseb.log


#These 2 oneliners are added to the crontab of the contoller device
/usr/bin/bash -c 'touch /tmp/forcestart_last.txt ; curl -L   -H "Accept: application/vnd.github+json"   -H "X-GitHub-Api-Version: 2022-11-28"   https://api.github.com/gists/c15ceea3944b19448506650346b25dff > /tmp/forcestart_request.json && [[ $(cat /tmp/forcestart_request.json | jq ".files.forcecontrol.content | fromjson | .[\"linux-wayne\"]") == "true" ]] && [[ $(cat /tmp/forcestart_request.json | jq ".updated_at") != $(cat /tmp/forcestart_last.txt) ]] && cat /tmp/forcestart_request.json | jq ".updated_at" > /tmp/forcestart_last.txt && /usr/bin/python3 /home/basraven/start1.py'


/usr/bin/bash -c 'touch /tmp/forcestart_last.txt ; curl -L   -H "Accept: application/vnd.github+json"   -H "X-GitHub-Api-Version: 2022-11-28"   https://api.github.com/gists/c15ceea3944b19448506650346b25dff > /tmp/forcestart_request.json && [[ $(cat /tmp/forcestart_request.json | jq ".files.forcecontrol.content | fromjson | .[\"jay-c\"]") == "true" ]] && [[ $(cat /tmp/forcestart_request.json | jq ".updated_at") != $(cat /tmp/forcestart_last.txt) ]] && cat /tmp/forcestart_request.json | jq ".updated_at" > /tmp/forcestart_last.txt && /usr/bin/python3 /home/basraven/start3.py'